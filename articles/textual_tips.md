---
title: textualã§ä½œã‚‹TUIã®TIPS
emoji: "ğŸ’»"
type: "tech" 
topics: [python,tui,textual]
published: true
published_at: 2025-06-10 06:00
publication_name: "secondselection"
---

## ã¯ã˜ã‚ã«

ã©ã†ã‚‚ã€ã‚»ã‚«ãƒ³ãƒ‰ã‚»ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‰é‡ã§ã™ã€‚

ã“ã“ã§ã¯Textualã§ç”»é¢ã‚’ä½œã£ãŸã¨ãã®Tipsã‚’æ›¸ãã¾ã™ã€‚


## ç›®æ¬¡
- [ã¯ã˜ã‚ã«](#ã¯ã˜ã‚ã«)
- [ç›®æ¬¡](#ç›®æ¬¡)
- [1. TIPSé›†](#1-tipsé›†)
  - [1. composeãƒ¡ã‚½ãƒƒãƒ‰](#1-composeãƒ¡ã‚½ãƒƒãƒ‰)
  - [2. ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®è¿½åŠ æ–¹æ³•](#2-ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®è¿½åŠ æ–¹æ³•)
    - [(1)ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’ä½¿ã†æ–¹æ³•](#1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’ä½¿ã†æ–¹æ³•)
    - [(2)ç›´æ¥`yield`ã™ã‚‹æ–¹æ³•](#2ç›´æ¥yieldã™ã‚‹æ–¹æ³•)
    - [ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ](#ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹)
  - [3. on\_mountãƒ¡ã‚½ãƒƒãƒ‰](#3-on_mountãƒ¡ã‚½ãƒƒãƒ‰)
  - [4. CSSã®ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ](#4-cssã®ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ)
  - [5. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†(VSCodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)](#5-ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†vscodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)
  - [6. ãƒ‡ãƒãƒƒã‚°](#6-ãƒ‡ãƒãƒƒã‚°)
  - [7. ã‚¤ãƒ™ãƒ³ãƒˆ](#7-ã‚¤ãƒ™ãƒ³ãƒˆ)
  - [8. ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼](#8-ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼)
    - [Linux](#linux)
    - [Windows](#windows)
  - [9. ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ](#9-ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ)
    - [TabbedContentã€TabPane](#tabbedcontenttabpane)
    - [MarkdownViewer](#markdownviewer)
    - [Datatable](#datatable)
      - [ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã€æ›´æ–°ã®æ–¹æ³•](#ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ æ›´æ–°ã®æ–¹æ³•)
- [2. ã•ã„ã”ã«](#2-ã•ã„ã”ã«)

## 1. TIPSé›†
![textualã‚¤ãƒ¡ãƒ¼ã‚¸](/images/textual_tips/textual_image.png)

ç”»é¢ã‚’ã„ãã¤ã‹ä½œã£ã¦ã¿ã¦ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸã¨ã“ã‚ã‚„æ°—ã‚’ä»˜ã‘ãŸã»ã†ãŒã„ã„ã¨ã“ã‚ã‚’æ›¸ãã¾ã™ã€‚

### 1. composeãƒ¡ã‚½ãƒƒãƒ‰

composeãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚è¤‡æ•°ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦ç”»é¢ã‚’æ§‹æˆã™ã‚‹éš›ã«ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§yieldã‚’ä½¿ã£ã¦ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é †ç•ªã«è¿½åŠ ã—ã¾ã™ã€‚ç‰¹ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†åˆ©ç”¨ã—ãŸã‚Šã€å‹•çš„ã«ç”»é¢ã‚’æ§‹ç¯‰ã—ãŸã‚Šã™ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚

ä¾‹ãˆã°ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒœã‚¿ãƒ³ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å«ã‚€ç”»é¢ã‚’ä½œæˆã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«composeãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚

```python
def compose(self) -> ComposeResult:
    yield Header()
    with Vertical():
        yield DataTable(id="note_table")
        yield RichLog(id="logger")
        with Horizontal(id="action"):
            yield Button("Save note", id="save_note_button")
            yield Button("Delete note", id="delete_note_button")

```
ã“ã®ã‚ˆã†ã«composeãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®æ§‹é€ ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤ç›´æ„Ÿçš„ã«è¨˜è¿°ã§ãã¾ã™ã€‚



### 2. ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®è¿½åŠ æ–¹æ³• 

Textualã§ã¯ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ç”»é¢ã«è¿½åŠ ã™ã‚‹æ–¹æ³•ã¨ã—ã¦`compose`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®è¿½åŠ ã«ã¯ä»¥ä¸‹ã®ï¼’ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚  

#### (1)ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’ä½¿ã†æ–¹æ³•
ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’`self`ã«ä¿æŒã—ã€`yield`ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«è¿½åŠ ã™ã‚‹æ–¹æ³•ã§ã™ã€‚  

```python
def compose(self) -> ComposeResult:
    self.note_table = DataTable(id="note_table")
    yield self.note_table
```

**ãƒ¡ãƒªãƒƒãƒˆ:**  
- ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’`self`ã«ä¿æŒã™ã‚‹ã“ã¨ã§ã€ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ããªã‚‹ï¼ˆä¾‹ï¼šãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚ã«`self.note_table`ã‚’ç›´æ¥æ“ä½œã§ãã‚‹ï¼‰ã€‚  

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**  
- å¤‰æ•°ãŒå¢—ãˆã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒä¸‹ãŒã‚‹ã€‚

#### (2)ç›´æ¥`yield`ã™ã‚‹æ–¹æ³•
ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’`yield`ã§ç›´æ¥ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«è¿½åŠ ã™ã‚‹æ–¹æ³•ã§ã™ã€‚  

```python
def compose(self) -> ComposeResult:
    yield DataTable(id="note_table")
```

**ãƒ¡ãƒªãƒƒãƒˆ:**  
- ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚‹ã€‚  
- ä¸€æ™‚çš„ãªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã‚ã‚Œã°ã€`self`ã«ä¿æŒã™ã‚‹å¿…è¦ãŒãªã„ã€‚  

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**  
- `self`ã«ä¿æŒã—ãªã„ãŸã‚ã€ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€‚ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’æ›´æ–°ãƒ»æ“ä½œã™ã‚‹å ´åˆã¯`query_one("#note_table")`ã®ã‚ˆã†ã«`id`ã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚  

```python
table = self.query_one("#note_table", DataTable)
table.add_row("1", "2025-03-24", "Sample note")
```

#### ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ
- **ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹å ´åˆï¼ˆãƒœã‚¿ãƒ³ã®ç„¡åŠ¹åŒ–ã€ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãªã©ï¼‰** â†’ **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’ä½¿ã†**  
- **ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§æ¸ˆã‚€å ´åˆï¼ˆå›ºå®šãƒœã‚¿ãƒ³ãªã©ï¼‰** â†’ **ç›´æ¥`yield`ã™ã‚‹**  


### 3. on_mountãƒ¡ã‚½ãƒƒãƒ‰

`on_mount`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ç”»é¢ãŒæ§‹ç¯‰ã•ã‚ŒãŸç›´å¾Œã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«è¿½åŠ ã•ã‚ŒãŸå¾Œå®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€åˆæœŸè¨­å®šã‚„ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ²ãªã©ã‚’è¡Œã†ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚  

ä¾‹ãˆã°ã€`on_mount`ã‚’ä½¿ã£ã¦`DataTable`ã«åˆ—ã‚’è¿½åŠ ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚  

```python
def on_mount(self) -> None:
    # åˆ—ã‚’è¿½åŠ ã™ã‚‹
    for key in ["id", "date", "contents"]:
        self.note_table.add_column(key, key=key)
    
    # ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰
    self._load_data()
```

ã“ã®ã‚ˆã†ã«`on_mount`ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒç¢ºå®šã—ãŸå¾Œã«å¿…è¦ãªå‡¦ç†ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

### 4. CSSã®ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ

idã€classesã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå(RichLog,Buttonãªã©)ã‚’æŒ‡å®šã™ã‚Œã°ã€tcssãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚µã‚¤ã‚ºã‚„è‰²ãªã‚“ã‹ã‚’è¨­å®šã§ãã¾ã™ã€‚

- Textualã§ã¯ã€ãƒœã‚¿ãƒ³ã®é«˜ã•ã‚’ï¼“è¡Œä»¥ä¸Šã«ã—ãªã„ã¨ã€æ ç·šã‚„ä¸­ã®æ–‡å­—ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€TUIã«ãŠã‘ã‚‹UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®åˆ¶é™ã®ãŸã‚ã§ã™ã€‚

- Inputã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã¯ã€widthã®æ–‡å­—æ•°ã‚’æŒ‡å®šã—ãªã„ã¨ç”»é¢ã®æ¨ªå¹…ã„ã£ã±ã„è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

### 5. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†(VSCodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)

Textualã‚’ä½¿ã„å§‹ã‚ãŸã“ã‚ã€VSCodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å‹•ã‹ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã©ã†ã‚„ã£ã¦çµ‚äº†ã™ã‚Œã°ã„ã„ã®ã‹ã‚ã‹ã‚‰ãšå›°ã‚Šã¾ã—ãŸã€‚

é€šå¸¸ã€Textualã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã™ã‚‹ã«ã¯Ctrl+Qã‚’æŠ¼ã—ã¾ã™ãŒã€VSCodeã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Ctrl+Qã‚’æŠ¼ã™ã¨VSCodeã®æ©Ÿèƒ½åˆ‡ã‚Šæ›¿ãˆãŒç™ºç”Ÿã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒçµ‚äº†ã—ã¾ã›ã‚“ã€‚
æ³£ãæ³£ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã”ã¨è½ã¨ã—ã¾ã—ãŸã€‚

ã¡ãªã¿ã«Ctrl+Cã§çµ‚äº†ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ŒCtrl+Qã§çµ‚äº†ã—ã¦ã­ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦çµ‚äº†ã§ãã¾ã›ã‚“ã€‚

ã§ã€ã©ã†ã™ã‚‹ã‹ã¨è¨€ã„ã¾ã™ã¨ã„ãã¤ã‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

1. Quitãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã—ã¦ã€Quitãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã‚‰`self.exti()`ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã—ã¾ã™ã€‚
1. Footerã‚’Textualã®ç”»é¢ã«è¿½åŠ ã—ã¦ãŠãã¨å³ç«¯ã«`^p palette`ã¨ã„ã†ã®ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ãã‚Œã‚’ãƒã‚¦ã‚¹ã§ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®`Quit the application`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨çµ‚äº†ã—ã¾ã™ã€‚
1. `ESC + Q`ã§ã‚‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã§ãã¾ã™ã€‚
1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¯ãƒ©ã‚¹å†…ã§`BINDINGS`å¤‰æ•°ã‚’ä½¿ã£ã¦Quitç”¨ã®ã‚­ãƒ¼ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ç´ã¥ã‘ã¾ã™ã€‚ã™ã‚‹ã¨ã€Footerã«Quitç”¨ã®ã‚­ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã®ã§ãã‚Œã‚’ãƒã‚¦ã‚¹ã§ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨çµ‚äº†ã—ã¾ã™ã€‚


```python
class DailyNote(App):
    BINDINGS = [
        Binding("q", "quit_process", "QUIT", show=True, priority=True),
    ]

```
ã“ã®ä¾‹ã§ã¯Footerã«ã€Œq QUITã€ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã®ã§ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ çµ‚äº†ã—ã¾ã™ã€‚

ã©ã‚ŒãŒä½¿ã„ã‚„ã™ã„ã‹ã¯å¥½ã¿ã§ã™ãŒã€ãƒã‚¦ã‚¹ã§ã‚¯ãƒªãƒƒã‚¯ã—ã¦çµ‚äº†ã§ãã‚‹ã®ã§ã€ç§ã¯4ç•ªç›®ã®æ–¹æ³•ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

### 6. ãƒ‡ãƒãƒƒã‚°

Textualä»¥å¤–ã®é–‹ç™ºã§ã¯ã€å¤‰æ•°ã®ä¸­èº«ã‚’printã§è¡¨ç¤ºã•ã›ã¦ãƒ‡ãƒãƒƒã‚°ã—ã¦ã„ã¾ã™ã€‚
Textualã§printã‚’ã—ã¦ã‚‚ã©ã“ã«ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚
loggeræ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒã€ã§ãã‚Œã°å®Ÿè¡Œä¸­ã«è¡¨ç¤ºã—ãŸã„ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚

ã§ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«RichLogã¨ã„ã†ã‚‚ã®ãŒã‚ã£ãŸã®ã§ã€ç”»é¢ã«è¿½åŠ ã—ã¦å¤‰æ•°ã®å†…å®¹ãªã‚“ã‹ã‚’å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚

### 7. ã‚¤ãƒ™ãƒ³ãƒˆ

ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹æ–¹æ³•ã¯äºŒç¨®é¡ã‚ã‚Šã¾ã™ã€‚

1. ã™ã§ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹å½¢ã§å¯¾å¿œã—ã¾ã™ã€‚
    - on_key(): ã‚­ãƒ¼å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ
    - on_list_view_selected(): ãƒªã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹é¸æŠã‚¤ãƒ™ãƒ³ãƒˆ
    - on_data_table_row_selected(): Datatableã®è¡Œé¸æŠã‚¤ãƒ™ãƒ³ãƒˆ

1. å‡¦ç†ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œæˆã—ã¦`@on`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¯ãƒ©ã‚¹ã¨idã‚’æŒ‡å®šã—ã¾ã™ã€‚

`@on`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç‰¹å®šã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾ã—ã¦å‡¦ç†ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã¯ã€å¯¾è±¡ã®**ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒ©ã‚¹**ã¨**ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ID**ã‚’æŒ‡å®šã—ã¾ã™ã€‚  

ä¾‹ãˆã°ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã®å‡¦ç†ã‚’å®šç¾©ã™ã‚‹å ´åˆã€æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚  

```python
@on(Button.Pressed, "#load_note_button")
def load_note_button(self) -> None:
    print("Load Note ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ")
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`Button.Pressed`ã‚¤ãƒ™ãƒ³ãƒˆãŒ`id="load_note_button"`ã®ãƒœã‚¿ãƒ³ã§ç™ºç”Ÿã—ãŸéš›ã«ã€`load_note_button`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚  

åŒæ§˜ã«ã€`DataTable`ã®è¡ŒãŒé¸æŠã•ã‚ŒãŸã¨ãã®å‡¦ç†ã‚’ç™»éŒ²ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚  

```python
@on(DataTable.RowSelected, "#note_table")
def data_table_row_selected(self, event: DataTable.RowSelected) -> None:
    print(f"é¸æŠã•ã‚ŒãŸè¡Œ: {event.row_key}")
```

ã“ã®ã‚ˆã†ã«`@on`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ã†ã“ã¨ã§ã€ç‰¹å®šã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾ã—ã¦æ˜ç¢ºãªå‡¦ç†ã‚’è¨˜è¿°ã§ãã¾ã™ã€‚

### 8. ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼

#### Linux

ç”»é¢ã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰MarkdownViewerã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‹ã£ãŸã‚“ã§ã™ãŒã€pyperclipãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ãŒã§ã¦ã€ä¸Šæ‰‹ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚

wsl2ã ã£ãŸã‚“ã§`Clip.exe`ã§ã‚³ãƒ”ãƒ¼ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸãŒã€æ–‡å­—åŒ–ã‘ã—ã¦çµå±€ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

ä»•æ–¹ãªã„ã®ã§TextAreaã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã¸å¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã•ã›ã¦å…¨ä½“é¸æŠâ†’ã‚³ãƒ”ãƒ¼ã¨ã„ã†æ‰‹æ®µã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

ã©ãªãŸã‹è§£æ±ºã—ãŸæ–¹ã¯æ•™ãˆã¦ãã ã•ã„ã€‚


#### Windows

Windowsä¸Šã§ã¯ç”»é¢ã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã§ã‚³ãƒ”ãƒ¼ã¯å•é¡Œãªãã‚³ãƒ”ãƒ¼ã§ãã¾ã—ãŸã€‚


### 9. ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ

#### TabbedContentã€TabPane

TUIã¯ã‚ã¾ã‚Šè¡¨ç¤ºé ˜åŸŸã‚’ã¨ã‚Œãªã„ã®ã§ã€ã‚¿ãƒ–ã‚’ä½¿ã£ã¦åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

ã‚‚ã£ã±ã‚‰ã®æ‚©ã¿ã¯ã€ã‚¿ãƒ–ã‚’å‹•çš„ã«è¿½åŠ ã§ããªã„ã“ã¨ã§ã™ã€‚

å‹•çš„ã«ã‚¿ãƒ–ã‚’è¿½åŠ ã™ã‚‹ã‚’ã„ã‚ã„ã‚è©¦ã—ã¦ã¿ãŸã®ã§ã™ãŒã€ä»Šã®ã¨ã“ã‚ã§ãã¦ã„ã¾ã›ã‚“ã€‚

ã©ãªãŸã‹ã‚„ã‚Šæ–¹ãŒã‚ã‹ã‚‹æ–¹ã¯æ•™ãˆã¦ãã ã•ã„ã€‚

#### MarkdownViewer

ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã¨æ•´å½¢ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![æ—¥å ±](/images/textual_tips/daily_note_001.png)

ã‚µãƒ³ãƒ—ãƒ«ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã„ã‚‹ã¨`mount()`ã§MarkdownViewerã®å±æ€§ã«ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã‚‚ã®ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ä¸Šã®ä¸€è¦§ã®ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠã—ãŸã‚‰ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã§è¡¨ç¤ºã™ã‚‹ã«ã¯ã©ã†ã—ãŸã‚‰ã„ã„ã‹ã©ã“ã«ã‚‚æ›¸ã„ã¦ãªã„ã‚“ã§ã™ã€‚

ã§ã€ä¸‹è¨˜ã®ã‚ˆã†ã«MarkdownViewerã®documentã«å¯¾ã—ã¦`update(ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ)`ã‚’å®Ÿè¡Œã™ã‚‹ã¨æ›¸ãæ›ã‚ã‚Šã¾ã™ã€‚

```python
        self.note_markdown = MarkdownViewer(id="note_markdown")

        md = self.note_markdown.document
        md.update(data)

```

#### Datatable

è¡¨å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

- è¡¨ä¸Šã§ãƒ‡ãƒ¼ã‚¿ã®å…¥åŠ›ã‚„å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚
- è¡Œåˆ—ã¯ã€ã‚­ãƒ¼æŒ‡å®šã¨è¡Œåˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§æŒ‡å®šã§ãã¾ã™ã€‚
    - ã‚­ãƒ¼æŒ‡å®šï¼šåˆ—ã‚’ä½œæˆã™ã‚‹ã¨ãã¨è¡Œã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ã‚­ãƒ¼(str)ã‚’è¨­å®šã—ã¦ãŠãã¾ã™ã€‚ã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€æ›´æ–°ã—ã¾ã™ã€‚
    - è¡Œåˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼šCoordinate(columnã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹,rowã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹)ã‚’æŒ‡å®šã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€æ›´æ–°ã—ã¾ã™ã€‚

##### ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã€æ›´æ–°ã®æ–¹æ³•

1. ã¾ãšåˆ—ã‚’è¿½åŠ ã—ã¾ã™ã€‚(add_column)
    1. åˆ—ã«ã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚
1. ãƒ‡ãƒ¼ã‚¿(è¡Œ)ã‚’è¿½åŠ ã—ã¾ã™ã€‚
    1. `add_row()`ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è¡Œè¿½åŠ ã—ã¾ã™ã€‚(è¡Œã®ã‚­ãƒ¼ã‚’æŒ‡å®šã§ãã¾ã™ã€‚)
        1. ãƒ‡ãƒ¼ã‚¿ã«ä¸€æ„ã‚­ãƒ¼ãŒã‚ã£ã¦å€‹åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ãŸã‘ã‚Œã°`add_row()`ã‚­ãƒ¼ä»˜ãã‚’å‹§ã‚ã¾ã™ã€‚
    1. `add_rows()`å…¨ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚(è¡Œã®ã‚­ãƒ¼ã‚’æŒ‡å®šã§ãã¾ã›ã‚“ã€‚)
        1. å€‹åˆ¥ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›´ã—ãªã„ã§ã€å…¨ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ã§ã‚ã‚Œã°ã“ã‚Œã§OKã§ã™ã€‚

åˆ—ã¨è¡Œã«ã‚­ãƒ¼ã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚

åˆ—ã®è¨­å®šã§ã‚ã‚‹`NOTE_COLUMNS`ã¯ã‚½ãƒ¼ã‚¹ã®å…ˆé ­ã§å®šç¾©ã—ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚

```python
NOTE_COLUMNS = ["id", "date", "contents"]


    def compose(self) -> ComposeResult:
        self.note_table = DataTable(id="note_table")
        self.note_table.cursor_type = "row"
        yield Header()
        with Vertical():
            yield self.note_table

    def on_mount(self):
        for key in NOTE_COLUMNS:
            self.note_table.add_column(key, key=key)
        self.note_table.clear(columns=False)
        row = []
        with database.JsonDB(dbname) as db:
            for row in db.get(tblname, sort="desc"):
                id = row["id"]
                daily_dt = data["daily_dt"]
                data = row["data"]
                t_row = [id, daily_dt, data]
                self.note_table.add_row(*t_row, key=id)
```

ã‚­ãƒ¼ãªã—åˆ—è¿½åŠ æ–¹æ³•ã§ã™ã€‚

```python
NOTE_COLUMNS = ["id", "date", "contents"]

    def on_mount(self):
        self.note_table.add_columns(*NOTE_COLUMNS)

```

## 2. ã•ã„ã”ã«

ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆã«ã¤ã„ã¦ã¯ç¾åœ¨ã€ä½•ã‹ã„ã„è§£æ±ºæ–¹æ³•ãŒãªã„ã‹ã‚’æ¢ã—ä¸­ã§ã™ã€‚
